<%- include('partials/header', {
  titulo: 'Backup do Sistema',
  subtitulo: 'Fa√ßa backup completo dos seus dados',
  user: locals.user
}) %>

<div class="card">
  <h2>üîí Backup Completo do Sistema</h2>
  
  <% if (message) { %>
    <div class="alert <%= message.type === 'error' ? 'alert-danger' : message.type === 'info' ? 'alert-info' : 'alert-success' %>">
      <%= message.text %>
    </div>
  <% } %>
  
  <p>Clique no bot√£o abaixo para gerar um backup <strong>100% completo</strong> do sistema.</p>
  
  <form action="/backup/gerar" method="POST" style="display: inline-block;">
    <button type="submit" class="btn btn-primary">
      üì• Gerar Backup Completo
    </button>
  </form>
  
  <div class="info-box" style="margin-top: 20px;">
    <h3>‚úÖ O que est√° inclu√≠do no backup:</h3>
    <ul>
      <li><strong>Estrutura completa das tabelas</strong> (CREATE TABLE)</li>
      <li><strong>Todos os dados</strong> de todas as tabelas</li>
      <li><strong>Usu√°rios do sistema</strong></li>
      <li><strong>Sequ√™ncias</strong> (contadores de ID)</li>
      <li><strong>Constraints</strong> (chaves prim√°rias e estrangeiras)</li>
      <li><strong>√çndices</strong> para performance</li>
      <li><strong>Relacionamentos</strong> entre tabelas</li>
    </ul>
  </div>

  <div class="warning-box" style="margin-top: 20px;">
    <h3>‚ö†Ô∏è Como restaurar o backup:</h3>
    <ol>
      <li>Fa√ßa login no console do PostgreSQL</li>
      <li>Execute: <code>psql -U seu_usuario -d seu_banco < backup_completo_xxx.sql</code></li>
      <li>Ou use uma ferramenta como pgAdmin para importar o arquivo</li>
    </ol>
  </div>
</div>

<style>
.info-box, .warning-box {
  padding: 15px;
  border-radius: 5px;
  margin-top: 15px;
}

.info-box {
  background: #d1ecf1;
  border: 1px solid #bee5eb;
  color: #0c5460;
}

.warning-box {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  color: #856404;
}

.alert-info {
  background: #d1ecf1;
  color: #0c5460;
  border: 1px solid #bee5eb;
}

code {
  background: #f5f5f5;
  padding: 2px 5px;
  border-radius: 3px;
  font-family: monospace;
}
</style>

<%- include('partials/footer') %>