<%- include('partials/header', {
  titulo: 'Dashboard',
  subtitulo: 'Visão geral do seu sistema',
  user: locals.user
}) %>

<div class="stats">
  <div class="stat-card">
    <h3><%= stats.total_produtos %></h3>
    <p>Total de Produtos</p>
  </div>
  <div class="stat-card">
    <h3><%= parseFloat(stats.total_em_estoque || 0).toLocaleString('pt-BR') %></h3>
    <p>Unidades em Estoque</p>
  </div>
  <div class="stat-card">
    <h3>R$ <%= parseFloat(stats.valor_estoque || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2}) %></h3>
    <p>Valor do Estoque</p>
  </div>
  <div class="stat-card">
    <h3><%= alertas.length %></h3>
    <p>Alertas de Estoque</p>
  </div>
</div>

<% if (alertas.length > 0) { %>
<div class="card">
  <h2>⚠️ Alertas de Estoque Baixo</h2>
  <div class="alert alert-warning">
    <strong>Produtos com estoque abaixo do mínimo:</strong>
    <% alertas.forEach(p => { %>
      <br><strong><%= p.codigo %></strong> - <%= p.descricao %> (Saldo: <%= parseFloat(p.saldo_atual).toLocaleString('pt-BR') %>, Mínimo: <%= p.estoque_minimo %>)
    <% }) %>
  </div>
</div>
<% } %>

<div class="card">
    <h2>Atalhos Rápidos</h2>
    <p>Utilize o menu de navegação acima para acessar as seções do sistema.</p>
</div>

<%- include('partials/footer') %>